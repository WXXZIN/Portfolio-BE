# Portfolio Back-end

## ğŸ“ ê°œìš”

ì´ í”„ë¡œì íŠ¸ëŠ” ê°œì¸ í¬íŠ¸í´ë¦¬ì˜¤ ì‘í’ˆìœ¼ë¡œ, íƒœê·¸ ê¸°ë°˜ì˜ ì¸ì› ëª¨ì§‘ ì•±ì„ ê°œë°œí•œ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ìì‹ ì´ í•„ìš”í•œ ì¸ì›ê³¼ ì¡°ê±´ì„ íƒœê·¸ë¡œ ì„¤ì •í•˜ì—¬ ëª¨ì§‘í•  ìˆ˜ ìˆê³ , ëª¨ì§‘ì— ì°¸ì—¬í•˜ê³ ì í•˜ëŠ” ì‚¬ëŒë“¤ì€ í•´ë‹¹ íƒœê·¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìì‹ ì—ê²Œ ë§ëŠ” ëª¨ì§‘ ê¸€ì„ ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë³´ë‹¤ íš¨ìœ¨ì ìœ¼ë¡œ íŒ€ì„ êµ¬ì„±í•˜ê³ , í•„ìš”í•œ ì‚¬ëŒë“¤ì„ ëª¨ì§‘í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ì œê³µí•©ë‹ˆë‹¤.

<br />

## ğŸ—‚ï¸ APIs
ì‘ì„±í•œ APIëŠ” ì•„ë˜ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ğŸ‘‰ğŸ» [API ë°”ë¡œë³´ê¸°](https://api.wxxzin.org/swagger-ui/index.html#/)

<br />

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

![Nginx](https://img.shields.io/badge/Nginx-009639?logo=nginx&logoColor=white&style=for-the-badge)
![Ubuntu](https://img.shields.io/badge/Ubuntu-E95420?style=for-the-badge&logo=Ubuntu&logoColor=white)
![Docker](https://img.shields.io/badge/docker-257bd6?style=for-the-badge&logo=docker&logoColor=white)
<br />
![Java](https://img.shields.io/badge/Java-ED8B00?style=for-the-badge&logo=openjdk&logoColor=white)
![Spring Boot](https://img.shields.io/badge/SpringBoot-6DB33F?style=for-the-badge&logo=Spring&logoColor=white)
![Spring Security](https://img.shields.io/badge/Spring%20Security-6DB33F?style=for-the-badge&logo=springsecurity&logoColor=white)
![Spring Data JPA](https://img.shields.io/badge/Spring_data_jpa-6DB33F?style=for-the-badge&logo=SpringSecurity&logoColor=white)
![MySQL](https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=mysql&logoColor=white)
![Redis](https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=redis&logoColor=white)
<br />

### í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜
![](https://github.com/user-attachments/assets/a58aaae9-bebe-47f7-8cb4-12f70c2be54a)

<br />

## ğŸ’¡ ì£¼ìš” ê¸°ëŠ¥
### í—¬ìŠ¤ ì²´í¬ ë° ì„œë²„ ëª¨ë‹ˆí„°ë§
- **Crontabì„ ì´ìš©í•œ í—¬ìŠ¤ ì²´í¬**: ì£¼ê¸°ì ìœ¼ë¡œ ì„œë²„ ìƒíƒœë¥¼ ì ê²€í•˜ê³ , ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ìë™ìœ¼ë¡œ Slackì„ í†µí•´ ì•Œë¦¼ ì „ë‹¬

### ì‚¬ìš©ì ì¸ì¦  
- **ì¼ë°˜ íšŒì› ê°€ì…**: ì´ë©”ì¼ ì¸ì¦ì„ í†µí•œ íšŒì› ê°€ì…  
- **ì†Œì…œ ë¡œê·¸ì¸**: í´ë¼ì´ì–¸íŠ¸ì—ì„œ SDKë¥¼ í†µí•´ ë¡œê·¸ì¸ í›„, OAuth2ë¥¼ ì´ìš©í•˜ì—¬ ì‚¬ìš©ì ì •ë³´ ê²€ì¦ ë° ì²˜ë¦¬  
- **JWT ì¸ì¦**: ìì²´ ì•¡ì„¸ìŠ¤ í† í° & ë¦¬í”„ë ˆì‹œ í† í° ë°œê¸‰ ë° ê²€ì¦  
- **í† í° ê´€ë¦¬**: Redisë¥¼ ì‚¬ìš©í•˜ì—¬ JWT ì €ì¥ ë° ë§Œë£Œ ê´€ë¦¬ (TTL ì„¤ì •ìœ¼ë¡œ ìë™ ì‚­ì œ)  

### ìŠ¤ì¼€ì¤„ë§  
- **ë§Œë£Œëœ ë¦¬í”„ë ˆì‹œ í† í° ì •ë¦¬** (Redis TTLì„ ì‚¬ìš©í•´ ìë™ ì‚­ì œ)  
- ê¸°íƒ€ ì˜ˆì•½ëœ ë°±ì—”ë“œ ì‘ì—… ì‹¤í–‰  

### ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™  
- **JPA**: ê°ì²´ì§€í–¥ì ì¸ ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ì„ ìœ„í•œ JPA ì‚¬ìš©  
- **MySQL**: ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬ ì‹œìŠ¤í…œ  

### ë°ì´í„° ìºì‹± ë° ì„¸ì…˜ ê´€ë¦¬
- **Redis**: ì´ë©”ì¼ ì¸ì¦ë²ˆí˜¸, JWT í† í° ë“±ì„ ì €ì¥  
- **Redis Sentinelì„ ì´ìš©í•œ ì¥ì•  ë³µêµ¬**: Redis Sentinelì„ í™œìš©í•˜ì—¬ ì¥ì•  ë°œìƒ ì‹œ ìë™ìœ¼ë¡œ ë§ˆìŠ¤í„°ë¥¼ ë³€ê²½í•˜ì—¬ ê°€ìš©ì„±ì„ ìœ ì§€ 

### API ë¬¸ì„œí™”  
- **Swagger**: API ë¬¸ì„œ ìë™í™” ë° í…ŒìŠ¤íŠ¸ ê°€ëŠ¥  

### í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬  
- **.env íŒŒì¼**: DB ì •ë³´, Redis ì„¤ì • ë“± ë³´ì•ˆì´ í•„ìš”í•œ ê°’ ê´€ë¦¬  

### ë³´ì•ˆ  
- **Spring Security ì ìš©**: ë³´ì•ˆ ì„¤ì •ì„ í†µí•œ ì¸ì¦ ë° ê¶Œí•œ ê´€ë¦¬ 

<br />

## ğŸ’» ì‹¤í–‰ ë°©ë²•

### 1. **ì„¤ì¹˜**

```bash
$ git clone https://github.com/WXXZIN/Portfolio-BE.git
```

<br />

### 2. **DB ë³¼ë¥¨ ë””ë ‰í† ë¦¬ ìƒì„±**

```bash
$ mkdir -p mysql/conf.d
$ mkdir -p mysql/data
$ mkdir -p mysql/init

$ touch mysql/conf.d/mysqld.cnf

$ mkdir -p redis/data

$ sudo chmod -R 777 mysql/data mysql/init mysql/conf.d
$ sudo chmod -R 777 redis/data
```

<br />

### 3. **Docker Compose ì‹¤í–‰**
`docker-compose.yml` íŒŒì¼ì„ í†µí•´ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [docker-compose.yml](https://bony-spell-7d4.notion.site/Portfolio-DB-docker-compose-1a67f240b10580e98446f1251ec3de3b)ì„ ì°¸ê³ í•˜ì„¸ìš”.

| ë²ˆí˜¸  | ë³€ìˆ˜ ì„¤ëª…                      | ì˜ˆì‹œ ê°’|
|------|------------------------------|--------------------|
| **[1]**  | MySQL í˜¸ìŠ¤íŠ¸ í¬íŠ¸              | `3306` |
| **[2]**  | MySQL ì»¨í…Œì´ë„ˆ í¬íŠ¸           | `3306` |
| **[3]**  | MySQL ì‚¬ìš©ì ê³„ì •             | `myuser` |
| **[4]**  | MySQL ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸         | `mypassword` |
| **[5]**  | MySQL Root ë¹„ë°€ë²ˆí˜¸          | `rootpassword` |
| **[6]**  | Redis ë§ˆìŠ¤í„° ë¹„ë°€ë²ˆí˜¸         | `redismasterpass` |
| **[7]**  | Redis ì¼ë°˜ ë¹„ë°€ë²ˆí˜¸           | `redispassword` |
| **[8]**  | ë‚´ë¶€ IP ì£¼ì†Œ                 | `192.168.0.2` |
| **[9]**  | Redis Sentinel ë¹„ë°€ë²ˆí˜¸       | `sentinelpass` |
| **[10]** | Redis Sentinel 1 í˜¸ìŠ¤íŠ¸ í¬íŠ¸  | `26379` |
| **[11]** | Redis Sentinel 1 ì»¨í…Œì´ë„ˆ í¬íŠ¸ | `26379` |
| **[12]** | Redis Sentinel 2 í˜¸ìŠ¤íŠ¸ í¬íŠ¸  | `26380` |
| **[13]** | Redis Sentinel 2 ì»¨í…Œì´ë„ˆ í¬íŠ¸ | `26379` |
| **[14]** | Redis Sentinel 3 í˜¸ìŠ¤íŠ¸ í¬íŠ¸  | `26381` |
| **[15]** | Redis Sentinel 3 ì»¨í…Œì´ë„ˆ í¬íŠ¸ | `26379` |

<br />

### 4. **.env ì‘ì„±**
src/main/resources ê²½ë¡œì— .env íŒŒì¼ ìƒì„±

```bash
PORT=

DB_HOST=
DB_PORT=
DB_NAME=
DB_USER=
DB_PASSWORD=

REDIS_JWT_INDEX=0
REDIS_MAIL_INDEX=1

REDIS_SENTINEL_MASTER=
REDIS_SENTINEL_PASSWORD=

MAIL_HOST=
MAIL_PORT=
MAIL_USERNAME=
MAIL_PASSWORD=

JWT_SECRET=
```

<br />

### 5. **RedisConfig ìˆ˜ì •**
```bash
package com.wxxzin.portfolio.server.common.config;

@Value("${spring.data.redis.sentinel.master}")
private String masterName;

@Value("${spring.data.redis.sentinel.password}")
private String sentinelPassword;

private RedisSentinelConfiguration createSentinelConfig() {
        RedisSentinelConfiguration redisSentinelConfiguration = new RedisSentinelConfiguration()
                .master(masterName);

        redisSentinelConfiguration.sentinel("[8]", [10]);
        redisSentinelConfiguration.sentinel("[8]", [12]);
        redisSentinelConfiguration.sentinel("[8]", [14]);
        redisSentinelConfiguration.setSentinelPassword(sentinelPassword);
        redisSentinelConfiguration.setPassword(sentinelPassword);

        return redisSentinelConfiguration;
    }
```
